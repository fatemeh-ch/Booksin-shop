{% extends 'base.html' %}

{% load blog_tags %}

{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'styles/blog_home.css' %}">
{% endblock %}

{% block title %} Blog {% endblock %}

{% block content %}

<!-- Blog Title  -->
<div class="blog_title">
    <h1>Blog</h1>
</div>
<!-- End of Blog Title -->

<!-- Main Content -->
<main class="main_content d-flex">

    <!-- Posts Area -->
    <section class="posts_area d-flex column-flex align-items-center">
        {% for post in posts %}
        <!-- Single Post -->
        <article class="single_post d-flex">

            <!-- Post Info -->

            {% include 'blog/blog_post_info.html' %}

            <!-- End of Post Info -->

            <!-- Post Content -->
            <div class="post-content d-flex column-flex">

                <!-- Post image   -->
                <div class="post-image">
                    <img src="{{post.image.url}}" alt="post-pic">
                </div>

                <!-- Post Title -->
                <div class="post-title">
                    <a href="{% url 'blog:single' pid=post.id %}">
                        <h3>
                            {{post.title}}
                        </h3>
                    </a>
                </div>

                <!-- Post description -->
                <div class="post_description">
                    <p>
                        {{post.content|truncatechars:100}}
                    </p>
                </div>

                <!-- View More button -->
                <div class="view_more">
                    <a href="{% url 'blog:single' pid=post.id %}">View More</a>
                </div>
            </div>
            <!-- End of Post Content -->

        </article>

        <!-- End of Single Post -->
        {% endfor %}
    </section>
    <!-- End of Post Area -->

    <!-- Widget Bar -->

    <div class="widget-bar d-flex column-flex align-items-center">

        {% include 'blog/search.html' %}

        {% include 'blog/blog_writer.html' %}

        {% latest_posts %}

        {% post_categories %}
    </div>
    <!-- End of Widget Bar -->
</main>

<!-- End of Main Content -->

<!-- Pagination -->

<div class="pagination">
    <ul class="d-flex justify-content-center align-items-center">

        {% if posts.has_previous %}
            <li>
                <a href="?page={{posts.previous_page_number}}">Previous</a>
            </li>
        {% endif %}

        {% for i in posts.paginator.page_range %}
            {% if page_number == i %}
                <li class="active">
                    <a href="?page={{i}}">{{i}}</a>
                </li>

        {% else %}
            <li>
                <a href="?page={{i}}">{{i}}</a>
            </li>

        {% endif %}
        {% endfor %}

        {% if posts.has_next %}
            <li>
                <a href="?page={{posts.next_page_number}}">Next</a>
            </li>
        {% endif %}

    </ul>
</div>

<!-- End of Pagination -->


{% endblock %}